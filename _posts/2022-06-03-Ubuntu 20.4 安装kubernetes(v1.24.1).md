本次安装使用Ubuntu20.4作为服务器系统，kubernetes版本为v1.24.1，容器运行时使用containerd。请参考kubernetes舍弃dockershim的原因。

<https://kubernetes.io/zh/blog/2022/04/07/upcoming-changes-in-kubernetes-1-24/>

# 节点初始化

```shell
hostnamectl set-hostname master

其他节点使用node作为hostname，本次实验只有一个master节点
```

更改以后修改/etc/hosts文件，让hostname正确解析

```shell
127.0.0.1 localhost master
```

```shell
sudo ufw status

如果未开启防火墙提示: Status: inactive

sudo ufw disable

Firewall stopped and disabled on system startup 防火墙关闭成功提示
```

```shell
sestatus  /  getenforce

查看selinux状态

关闭selinux

vi /etc/selinux/config

SELINUX=disabled

Ubuntu默认关闭selinux，启动selinux需要安装selinux才可以
```

```shell
swapoff -a

临时关闭swap分区

vi /etc/fstab

#swap……

永久关闭swap分区
```

# 安装kubeadm kubectl kubelet

```shell
sudo apt update

sudo apt upgrade -y
```

升级软件版本以及内核版本，升级完成后需要重启服务器


